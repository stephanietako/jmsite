import{g as I,a as W,r as s,j as l}from"./index-CaJmAt0Y.js";var Y=W();const q=I(Y),S="_overlay_o7qwx_2",X="_galleryModal_o7qwx_26",C="_galleryImageWrapper_o7qwx_44",N="_galleryImage_o7qwx_44",T="_caption_o7qwx_66",R="_hint_o7qwx_74",Z="_closeBtn_o7qwx_82",c={overlay:S,galleryModal:X,galleryImageWrapper:C,galleryImage:N,caption:T,hint:R,closeBtn:Z},B="/assets/mutation_wolf_origin-a3Ksom0R.webp";function z({src:h,alt:r}){const[t,a]=s.useState(1),[i,u]=s.useState({x:0,y:0}),[n,m]=s.useState(null),[x,g]=s.useState(null),d=s.useRef(null);s.useEffect(()=>{d.current&&(d.current.style.objectFit="contain",d.current.style.maxWidth="100%",d.current.style.maxHeight="80vh")},[]);const M=e=>{e.preventDefault();let o=t+(e.deltaY<0?.15:-.15);o=Math.max(1,Math.min(3,o)),a(o),o===1&&u({x:0,y:0})},v=e=>{e.shiftKey||e.button===2?a(o=>{const y=Math.max(1,o-.5);return y===1&&u({x:0,y:0}),y}):a(o=>Math.min(3,o+.5))},_=e=>{t!==1&&m({x:e.clientX-i.x,y:e.clientY-i.y})},w=e=>{n&&u({x:e.clientX-n.x,y:e.clientY-n.y})},f=()=>m(null),b=e=>{e.touches.length===2?g(Math.hypot(e.touches[0].clientX-e.touches[1].clientX,e.touches[0].clientY-e.touches[1].clientY)):e.touches.length===1&&t>1&&m({x:e.touches[0].clientX-i.x,y:e.touches[0].clientY-i.y})},D=e=>{if(e.touches.length===2&&x){const o=Math.hypot(e.touches[0].clientX-e.touches[1].clientX,e.touches[0].clientY-e.touches[1].clientY);let y=(o-x)/100,p=Math.max(1,Math.min(3,t+y));a(p),p===1&&u({x:0,y:0}),g(o)}else e.touches.length===1&&n&&u({x:e.touches[0].clientX-n.x,y:e.touches[0].clientY-n.y})},E=()=>{m(null),g(null)},j=()=>{a(1),u({x:0,y:0})},k=e=>e.preventDefault();return l.jsx("div",{className:c.galleryImageWrapper,onWheel:M,onDoubleClick:j,onClick:v,onMouseDown:_,onMouseMove:w,onMouseUp:f,onMouseLeave:f,onTouchStart:b,onTouchMove:D,onTouchEnd:E,onContextMenu:k,style:{cursor:t>1?n?"grabbing":"grab":"zoom-in",touchAction:"none"},children:l.jsx("img",{ref:d,src:h,alt:r,className:c.galleryImage,style:{transform:`scale(${t}) translate(${i.x/t}px, ${i.y/t}px)`,transition:n?"none":"transform 0.3s cubic-bezier(0.4, 0.2, 0.2, 1)"},draggable:!1})})}const L=({isOpen:h,onClose:r})=>(s.useEffect(()=>{if(!h)return;const t=a=>a.key==="Escape"&&r();return document.addEventListener("keydown",t),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",t),document.body.style.overflow=""}},[h,r]),h?q.createPortal(l.jsxs("div",{className:c.overlay,onClick:r,children:[l.jsx("button",{className:c.closeBtn,onClick:r,"aria-label":"Fermer",children:"‚úï"}),l.jsxs("div",{className:c.galleryModal,onClick:t=>t.stopPropagation(),role:"dialog","aria-modal":"true",children:[l.jsx(z,{src:B,alt:"≈íuvre originale 'Mutation Wolf' par Jean-Marc Eliette"}),l.jsx("div",{className:c.caption,children:'≈íuvre originale "Mutation Wolf" par Jean-Marc Eliette'}),l.jsx("div",{className:c.hint,children:"üñ±Ô∏è Zoom / Pinch ‚Äì Glisser : d√©placer ‚Äì Double clic : reset"})]})]}),document.body):null);export{L as default};
